(window.webpackJsonp=window.webpackJsonp||[]).push([[470],{1547:function(t,e,n){(function(e){n(22);var o=n(200).Root.fromJSON(n(201)).lookup("onescore.app.v1.Push"),r=n(1571).connect;t.exports.Client=function(t){var e=this;for(var i in e.options={id:"",proto:!0,host:"wss://mq.aiscore.com",port:"443",route:"mqtt",topic:"",initCallback:"",message:""},t)e.options[i]=t[i];return e.init(),e},t.exports.Client.prototype={client:"",init:function(){var t=this;t.client=r(t.options.host+":"+t.options.port+"/"+t.options.route),Array.isArray(t.options.topic)?t.options.topic.forEach((function(e){t.client.subscribe(e)})):t.client.subscribe(t.options.topic),t.client.on("message",(function(n,r){try{var c,l=e.from(r,"utf8");c=t.options&&t.options.proto?o.decode(l):l,t.options.message&&t.options.message(c)}catch(t){}}))}}}).call(this,n(328).Buffer)},1565:function(t,e,n){},1572:function(t,e){},1573:function(t,e){},1574:function(t,e){},1575:function(t,e){},1576:function(t,e){},1577:function(t,e){},1596:function(t,e,n){"use strict";n(1565)},1598:function(t,e,n){"use strict";n(23),n(28),n(30),n(40),n(22),n(41);var o=n(11),r=n(3),c=n(1549),l=n(20);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m={props:["detail_backShow","matchvs"],computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.e)(["appStoreUrl","proModule"])),methods:{routeAppstore:function(){r.a.gtag("event",c.a["m_".concat(this.proModule,"match_stream")]),this.linkApp()}}},f=(n(1596),n(14)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-overlay",{attrs:{show:t.detail_backShow}},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"block",staticStyle:{"margin-top":"3.68rem"}},[n("div",{staticClass:"detailBack",class:t.proModule,on:{click:t.routeAppstore}},[n("div",{staticClass:"available van-ellipsis"},[t._v(t._s(t.$t("map_football['Live Streaming Available']")))]),t._v(" "),n("div",{staticClass:"matchvs van-ellipsis"},[t._v(t._s(t.matchvs))]),t._v(" "),n("div",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.$emit("update:detail_backShow",!1)}}}),t._v(" "),n("div",{staticClass:"installBtn"},[t._v("\n          "+t._s(t.$t("map_football.INSTALL"))+" AiScore APP\n        ")])])])])])}),[],!1,null,"37639b72",null);e.a=component.exports},2296:function(t,e,n){},2297:function(t,e,n){},3219:function(t,e,n){"use strict";n(2296)},3220:function(t,e,n){"use strict";n(2297)},3271:function(t,e,n){"use strict";n.r(e);n(23),n(28),n(40),n(41);var o=n(11),r=(n(18),n(79),n(21),n(55),n(329),n(22),n(59),n(30),n(3)),c=n(1808),l=n(2320),h=n(1598),m=n(1549),f=n(20),d=n(5),v=(n(36),n(51),n(31)),_=n(1);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}n(1547),n(117);var y=n(200).Root.fromJSON(n(201)).lookup("onescore.app.v1.History"),$={data:function(){return{}},computed:w(w({},Object(f.e)("football/detail",["firstRender","header_tab"])),{},{WebMatchData:function(){return this.$store.state["football/detail"].WebMatchData}}),mounted:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){var n,o,r,i,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=["overview","chat","lineups","h2h","standings"],o=t.transFtb(t.$options.filters.isNull(t.WebMatchData,"match.menu"),4),r=t.transFtb(t.$options.filters.isNull(t.WebMatchData,"match.menu"),7),o>0||(n=n.filter((function(t){return"lineups"!==t}))),r>0||(n=n.filter((function(t){return"standings"!==t}))),i=0;case 6:if(!(i<n.length)){e.next=17;break}if((c=n[i])===t.firstRender){e.next=14;break}return e.next=11,t.$store.dispatch("football/detail/FETCH_DETAIL",{match_id:t.$route.params.matchId,tab:c,lang:t.$store.state.lang,tz:t.$store.state.timezone,hasOverview:!0,prefetch:!0});case 11:(l={})[c]=!0,t.set_hasprefetchLoad(l);case 14:i++,e.next=6;break;case 17:n.map((function(e){"chat"===e&&t.$route.params.matchId&&t.$eventBus.$emit("chat_mqtt")})),t.$eventBus.$emit("odds_mqtt");case 19:case"end":return e.stop()}}),e)})))()},methods:w(w(w(w({},Object(f.b)("football/detail",["getOddDetail"])),Object(f.d)("football/detail",["set_hasprefetchLoad"])),Object(f.d)(["set_messageList"])),{},{getHistory:function(){var t=this,e=v.a.chatLanguage[this.$store.state.lang],n="/v1/m/api/chat/history?match_id=".concat(this.$route.params.matchId||"","&target_lang=").concat(e?this.$store.state.lang:"2").concat("");Object(_.a)(n,y).then((function(e){if(e.messages){var n=e.messages.filter((function(e){return t.$options.filters.trim(e.translatedContent||e.content)&&!e.blocked}));t.set_messageList(n)}}))}})},D=(n(3219),n(14)),j=Object(D.a)($,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"prefetch"})}),[],!1,null,null,null).exports,T=n(7);function M(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P=n(1547),S=n(200).Root.fromJSON(n(201)).lookup("onescore.app.v1.Message"),W={components:{DetailTop:l.default,newVist:h.a,prefetch:j},data:function(){return{f_status:"",showMediaPlayer:!1,serverTime:1,detail_backShow:!1,prefetchLoad:!1,filterTab:"eu",loading:!0}},computed:k(k(k({},Object(f.e)(["willload","cidData"])),Object(f.e)("football/detail",["header_tab","detail_loading","oddsDetailData"])),{},{WebMatchData:function(){var t=this,e=t.$store.state["football/detail"].WebMatchData,n=e.match;return t.f_status=t.formatTime(n),e},HISTORY_DETAIL_DATA:function(){return this.$store.state["football/detail"].HISTORY_DETAIL_DATA},matchvs:function(){try{return this.WebMatchData.match.homeTeam.name+" VS "+this.WebMatchData.match.awayTeam.name}catch(t){return""}},companyTab:{get:function(){return this.oddsDetailData.choosedCompanyId},set:function(t){}}}),mounted:function(){var t=this;this.$store.dispatch("getTimeData"),this.loading=!1;var e=this;e.willload||(e.$cookies.get("newUserVisit")?e.$cookies.set("newUserVisit",e.$cookies.get("newUserVisit")+1):e.$cookies.set("newUserVisit",1)),1!=e.$cookies.get("newUserVisit")||this.isquickApp||(e.detail_backShow=!0,r.a.gtag("event",m.a.m_matchpopwindow)),this.$eventBus.$on("chat_mqtt",(function(){t.chatMqtt()})),this.$eventBus.$on("change_filterTab",(function(e){t.filterTab=e}))},methods:k(k({},Object(f.d)(["set_messageList_push"])),{},{oddsMqtt:function(){var t=this,e=this.$route.params.matchId;t.mqtt_odds=new P.Client({topic:["/sports/match/".concat(e,"/odd")],message:function(e){try{if(e&&e.odds){var n=e.odds[0].items||[];t.$store.commit("set_oddsListData_mqtt",n)}}catch(t){}}})},chatMqtt:function(){var t=this,e=this.$route.params.matchId,n=v.a.chatLanguage[this.$store.state.lang];this.mqtt_chat=new P.Client({topic:["/chat/".concat(e).concat(n?"/"+n:"/en")],proto:!1,message:function(e){try{var n=S.decode(e);1!=n.type&&2!=n.type||t.$options.filters.trim(n.translatedContent||n.content)&&!n.blocked&&(t.set_messageList_push(n),t.$eventBus.$emit("scrollTop"))}catch(t){}}})},initMqtt:function(){var t=this,e=["/sports/match/".concat(t.$route.params.matchId,"/incident"),"/sports/match/".concat(t.$route.params.matchId,"/stats"),"/sports/1/match/scores"];t.mqtt=new P.Client({topic:e,message:function(e){t.$route.query.mqtt,e.incidents&&e.incidents.length&&t.$store.dispatch("football/detail/FETCH_DETAIL",{match_id:t.$route.params.matchId,tab:"overview",lang:t.$languageMap[t.$i18n.locale]}),e.stats&&e.stats.length&&t.$store.dispatch("football/detail/MERGE_STATS",{data:e.stats}),e.scores&&e.scores.length&&e.scores.forEach((function(e){e.matchId==t.WebMatchData.match.id&&t.$store.commit("football/detail/MERGE_WebMatchData",e)}))}})},initTimmer:function(){var t=this;t.timmer=setTimeout((function(){t.f_status=t.formatTime(t.WebMatchData.match),t.initTimmer()}),5e3)},formatTime:function(t){var e,n=t?t.matchStatus:1;try{1==n&&(e="-"),2==n&&(e=this.serverTime&&Object(c.c)(t,T.footballStatus,this.serverTime)),e||(e=Object(c.b)(n,t.statusId,T.footballStatus))}catch(t){}return e},swipe:function(t){var e=["overview","chat","lineups","odds","h2h","standings"],n=this.transFtb(this.$options.filters.isNull(this.WebMatchData,"match.menu"),4),o=this.transFtb(this.$options.filters.isNull(this.WebMatchData,"match.menu"),7);n>0||(e=e.filter((function(t){return"lineups"!==t}))),o>0||(e=e.filter((function(t){return"standings"!==t})));var r=e.indexOf(this.header_tab),c=0;-1==(c=1==t?r+1:r-1)?c=e.length-1:c==e.length&&(c=0),this.$refs.tabRef.handleClick(e[c])}}),watch:{"$store.state.onlineStatus":function(t,e){"online"==t&&"offline"==e&&(this.mqtt&&this.mqtt.client.reconnect(),this.mqtt_odds&&this.mqtt_odds.client.reconnect(),this.mqtt_chat&&this.mqtt_chat.client.reconnect())},cidData:function(t,e){var n=this,o=this.WebMatchData.match;this.serverTime=(new Date).getTime()/1e3-t.time,this.f_status=this.formatTime(o),this.initTimmer(),this.initMqtt(),setTimeout((function(){n.prefetchLoad=!0}),0)}},head:function(){if(this.WebMatchData.match&&"prediction"!==this.header_tab){var t,e,o,c,l,h=n(1923).default,time=1e3*(r.a.calculateTimezone(this.$store.state.timezone)+this.WebMatchData.match.matchTime),m=h({home:null===(t=this.WebMatchData.match.homeTeam)||void 0===t?void 0:t.name,away:null===(e=this.WebMatchData.match.awayTeam)||void 0===e?void 0:e.name,date:this.$dayjs(time).format("YYYY/MM/DD"),matchTime:this.$dayjs(time).format("YYYY/MM/DD HH:mm"),competition:null===(o=this.WebMatchData.match.competition)||void 0===o?void 0:o.name,key:"match_".concat(this.header_tab||"overview"),lang:this.$i18n.locale||"en"});return r.a.filtrationMatch(null===(c=this.WebMatchData.match.homeTeam)||void 0===c?void 0:c.name,null===(l=this.WebMatchData.match.awayTeam)||void 0===l?void 0:l.name)&&m.meta.push({name:"robots",content:"noindex,nofollow"}),m}return{}},beforeDestroy:function(){try{this.$eventBus.$off("chat_mqtt"),this.$eventBus.$off("odds_mqtt"),this.$eventBus.$off("change_filterTab"),this.mqtt&&(this.mqtt.client.end(),this.mqtt=null),this.mqtt_odds&&(this.mqtt_odds.client.end(),this.mqtt_odds=null),this.mqtt_chat&&(this.mqtt_chat.client.end(),this.mqtt_chat=null),this.timmer&&(clearTimeout(this.timmer),this.timmer=null)}catch(t){}}},C=(n(3220),Object(D.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail"},[n("DetailTop",{ref:"tabRef",attrs:{WebMatchData:t.WebMatchData,f_status:t.f_status}}),t._v(" "),t.WebMatchData.match.id?n("div",{staticClass:"content",style:{opacity:t.loading?0:1}},[n("nuxt-child")],1):t._e(),t._v(" "),n("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading",attrs:{type:"spinner",vertical:""}}),t._v(" "),t.prefetchLoad?n("prefetch"):t._e()],1)}),[],!1,null,null,null));e.default=C.exports}}]);