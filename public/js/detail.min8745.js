var sendingReport=!1,classPopup=".popup-player:not(.with-package)";function closeReportError(){$(".popup-report").fadeOut(300)}function openReportError(){$(".popup-report").fadeIn(300)}function sendReportError(){let e=$('[name="optionReportLink"]:checked').val(),t=$(".reportLink").data("match"),o=$(".bnt_sv.active").data("id");if(void 0!==e){if(sendingReport)return;sendingReport=!0,$(".reportLink").html("Wait..."),$.ajax({url:"/store-report-link",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{matchId:t,linkId:o,reason:e,data_type:1},dataType:"json",success:function(e){closeReportModal(),alert(e.message),sendingReport=!1,$(".reportLink").html("Send")},error:function(e){closeReportModal(),alert(e.responseJSON.message),sendingReport=!1,$(".reportLink").html("Send")}})}else alert("Please select reason")}function showTime(e){let t=Math.floor(e/60),o=e%60;if(o=o<10?`0${o}`:o,t>0){let e=Math.floor(t/60);return e>0?(t%=60,t=t<10?`0${t}`:t,e=e<10?`0${e}`:e,e+":"+t+":"+o+" s"):(t=t<10?`0${t}`:t,t+":"+o+" s")}return o+" s"}function countDownTimeLeft(){matchInfo.timeleft>=900&&0==matchInfo.is_playing&&setInterval((function(){let e=moment().tz("UTC").unix(),t=matchInfo.timestamp-e;t<=900?location.reload():($("#player-html5").remove(),$(".box-countdown").fadeIn(300),$(".txt-count-down").html(`The match will start in ${showTime(t)}`))}),1e3)}function checkPopup(){try{if(console.log("classPopup",classPopup),"block"!=$(classPopup).css("display")||"1"!=$(classPopup).css("opacity")||"flex"!=$(".popup-player > div").css("display")||"1"!=$(".popup-player > div").css("opacity"))return console.log("REMOVE"),playerInstance&&playerInstance.remove(),$("#player-html5").html(""),!1}catch(e){}return!0}async function showPopup(){if(!show_popup_all_match&&!matchInfo.is_hot||matchInfo.is_ended||"vip_"==user_private_token.substr(0,4))$(classPopup).css("display","none");else for(user_private_token?($(".description-popup").html("Please upgrade your account to remove popup and watch in fullscreen mode"),$(".btn-popup").attr("href","/pricing"),$(".btn-popup").html("Upgrade Account"),classPopup=".popup-player.with-package"):$(".btn-popup").attr("href","/signin");;){$(classPopup).css("display","none");for(let e=time_view_free;e>0;e--){if(0==checkTimeWatchFree())return;console.log("SHOW VIEW: "+e),await sleep(1e3)}$(classPopup).css("display","block");for(let e=time_show_popup;e>0;e--){if(0==checkTimeWatchFree())return;if(console.log("Show popup: "+e),0==checkPopup())return;await sleep(1e3)}await sleep(1e3)}}function checkDevice(){firebase.initializeApp(firebaseConfig);var e=firebase.database(),t=`${user_info.id}`,o=user_info.user_device;e.ref().child("users/"+t).on("value",(function(e){var t=e.val();null!=t&&void 0!==t.login_number&&(t.session_id.indexOf(o)<0?($("#player-html5").html(""),Swal.fire({title:"Your account has just signed in on another device. We'll sign out of your account on all devices.",width:600,icon:"error",showConfirmButton:!0}).then((function(e){location.href="/logout"}))):console.log("CHECK DEVICE: OK"))}))}function checkTimeWatchFree(){return console.log("T: "+(timeWatchFree-moment().unix())),!(timeWatchFree-moment().unix()<0)||(playerInstance.remove(),$("#player-html5").remove(),$("#loadingPlayer").remove(),$(classPopup).css("display","block"),window.innerWidth>1030?$(".desc-web").html("Your "+totalTimeWatchFree+"-minute trial period for today has expired, please upgrade your account to continue watching."):$(".alert.mb-3").html("Your "+totalTimeWatchFree+"-minute trial period for today has expired, please upgrade your account to continue watching.").fadeIn(300),!1)}$(document).ready((function(){let e=$(".time-match"),t="";e.map((function(e,o){let n=$(o).data("timestamp");if(n){let e=moment.unix(n).format("dddd, DD/MM");if(e!=t){let n=$(o).parents(".is_mobile");$('<div class="box-live-sport-match-title"> '+e+" </div>").insertBefore(n.parent()),t=e}$(o).find(".txt_time").html(moment.unix(n).format("HH:mm"))}})),$(".bnt_sv").on("click",(function(){let e=$(this).data("link");$(".bnt_sv").removeClass("active"),$(this).addClass("active"),createPlayer(e,user_private_token)})),checkAccount((function(){if(user_info&&user_info.is_vip&&"true"==user_info.is_vip)setTimeout((function(){checkDevice()}),1e4),$(".only-vip").css("opacity","0");else{var e=document.createElement("style");e.innerHTML=".jw-icon-fullscreen { display: none!important; }",document.body.appendChild(e)}(!user_info||user_info&&!user_info.package_id)&&$(".prematch-container").fadeIn(),showPopup(),$(".bnt_sv").length>0&&countDownTimeLeft(),$(".bnt_sv").length>0?$(".bnt_sv")[0].click():matchInfo.timeleft>900&&0==matchInfo.is_playing?(countDownTimeLeft(),$(".poll-container").html(`<iframe style="width: 100%; border: 0" src="https://poll.bingsport.com/?source=${location.hostname}&match_id=${matchInfo.id}&token=${user_info.access_token?user_info.access_token:""}" />`),user_private_token||$(".poll-container").append('<div class="div-login" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>')):($(".box-schedule").fadeIn(300),$(".box-countdown").html("Match ended")),user_info&&"false"==user_info.new_package?packagePreview=packagePreview.filter((function(e){return 1==e.old_user&&1==e.most_popular})):packagePreview=packagePreview.filter((function(e){return 0==e.old_user&&1==e.most_popular}));let t=packagePreview.filter((function(e){return e.country&&e.country.match(`,${country},`)}));t.length>0?packagePreview=t:packagePreview=packagePreview.filter((function(e){return!e.country})),packagePreview.length>0&&($(".item-package .item-package-title").html(packagePreview[0].day_using+" "+packagePreview[0].day_code+" - $"+packagePreview[0].price),$(".item-package .time").html(packagePreview[0].day_using+" "+packagePreview[0].day_code),$(".item-package .percent").html("$ "+packagePreview[0].pricePerMonth))}),matchInfo.is_playing?"?is_playing=true":""),highLight&&createPlayer(highLight.link_highlight,user_private_token),$(document).on("click",".div-login",(function(){location.href="/signin"}))}));
